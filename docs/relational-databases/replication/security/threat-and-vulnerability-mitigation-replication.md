---
title: "Amea&#231;a e mitiga&#231;&#227;o de vulnerabilidade (Replica&#231;&#227;o) | Microsoft Docs"
ms.custom: ""
ms.date: "03/07/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "replication"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "ataques [replicação do SQL Server]"
  - "ameaças [segurança de replicação do SQL Server]"
  - "segurança [replicação do SQL Server], ameaças"
  - "ameaças de segurança [replicação do SQL Server]"
ms.assetid: 314fe497-56d8-4192-98e9-21b87cf8db04
caps.latest.revision: 11
author: "BYHAM"
ms.author: "rickbyh"
manager: "jhubbard"
caps.handback.revision: 11
---
# Amea&#231;a e mitiga&#231;&#227;o de vulnerabilidade (Replica&#231;&#227;o)
  Este tópico descreve técnicas para reduzir ameaças a uma topologia de replicação.  
  
## Criptografia  
 A criptografia é o processo de converter dados em um formato que não pode ser lido sem uma chave especial, de modo que somente o destinatário pode ler os dados. A replicação não criptografa dados armazenados em tabelas ou enviados por conexões de rede. Isso é por projeto, pois a criptografia está disponível em nível de transporte com diversas tecnologias, incluindo as seguintes tecnologias padrão da indústria: VPN (Virtual Private Networks), SSL (Secure Sockets Layer) e IPSEC (IP Security). Recomendamos usar um desses métodos de criptografia para as conexões entre computadores em uma topologia de replicação. Para obter mais informações, consulte [Habilitar conexões criptografadas para o mecanismo de banco de dados e 40; SQL Server Configuration Manager & 41;](../../../database-engine/configure-windows/enable encrypted connections to the database engine.md). Para obter informações sobre como usar VPN e SSL para replicar dados na Internet, consulte [Securing Replication Over the Internet](../../../relational-databases/replication/security/securing-replication-over-the-internet.md).  
  
 Se você usar SSL para proteger as conexões entre computadores em uma topologia de replicação, especifique um valor de **1** ou **2** para o **- EncryptionLevel** parâmetro de cada agente de replicação (um valor de **2** é recomendado). Um valor de **1** especifica que é usada criptografia, porém o agente não verifica se o certificado do servidor SSL está assinado por um emissor confiável; um valor **2** especifica que o certificado é verificado. Os parâmetros de agente podem ser especificados em perfis de agente e na linha de comando. Para obter mais informações, consulte:  
  
-   [Trabalhar com perfis do agente de replicação](../../../relational-databases/replication/agents/work-with-replication-agent-profiles.md)  
  
-   [Exibir e modificar parâmetros de Prompt de comando do agente de replicação e 40; SQL Server Management Studio e 41;](../../../relational-databases/replication/agents/view and modify replication agent command prompt parameters.md)  
  
-   [Conceitos dos executáveis do Replication Agent](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md)  
  
 A replicação tem o seguinte comportamento em relação a Chaves Mestras de banco de dados, que são usadas para criptografar dados:  
  
-   Se existir uma Chave Mestra em um banco de dados envolvido em replicação (um banco de dados de publicação, um banco de dados de assinatura ou um banco de dados de distribuição), a replicação criptografa e descriptografa as senhas dos agentes nesse banco de dados usando uma chave simétrica de banco de dados do [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]. Se forem usadas Chaves Mestras, deverá ser criada uma Chave Mestra em cada banco de dados envolvido na replicação. Para obter mais informações sobre como criar chaves mestras, consulte [CREATE MASTER KEY & #40. O Transact-SQL e 41;](../../../t-sql/statements/create-master-key-transact-sql.md).  
  
-   Replicação não replica Chaves Mestras. Caso exija a Chave Mestra no Assinante, você deverá exportá-la do banco de dados de publicação usando BACKUP MASTER KEY e, em seguida, importá-la para o banco de dados de assinatura usando RESTORE MASTER KEY. Para obter mais informações, consulte [BACKUP MASTER KEY & #40. O Transact-SQL e 41;](../../../t-sql/statements/backup-master-key-transact-sql.md) e [RESTAURAR a chave MESTRA e 40; O Transact-SQL e 41;](../../../t-sql/statements/restore-master-key-transact-sql.md).  
  
-   Se uma chave mestra é definido para um banco de dados de assinaturas anexável, especifique a senha de chave mestra usando o **@db_master_key_password** parâmetro [sp_attachsubscription & #40. O Transact-SQL e 41;](../../../relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql.md). Isso permite anexar o banco de dados no Assinante.  
  
 Para obter mais informações sobre criptografia e chaves mestras, consulte [hierarquia de criptografia](../../../relational-databases/security/encryption/encryption-hierarchy.md).  
  
 A replicação permite que você publique dados criptografados em coluna. Para descriptografar e usar esses dados no Assinante, a chave usada para criptografar os dados no Publicador também deve estar presente no Assinante. A replicação não fornece um mecanismo seguro para transportar chaves de criptografia. Você deve recriar a chave de criptografia manualmente no Assinante. Para obter mais informações, consulte [replicar dados em colunas criptografadas e 40; SQL Server Management Studio e 41;](../../../relational-databases/replication/security/replicate-data-in-encrypted-columns-sql-server-management-studio.md).  
  
## Consulte também  
 [Identidade e controle de acesso e 40; Replicação e 41;](../../../relational-databases/replication/security/identity-and-access-control-replication.md)   
 [Visão geral de segurança e 40; Replicação e 41;](../../../relational-databases/replication/security/security-overview-replication.md)   
 [Proteger desenvolvimento & #40. Replicação e 41;](../../../relational-databases/replication/security/secure-development-replication.md)   
 [Proteger a implantação e 40; Replicação e 41;](../../../relational-databases/replication/security/secure-deployment-replication.md)  
  
  